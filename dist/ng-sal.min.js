!function(){"use strict";angular.module("ng-sal",["http-auth-interceptor","base64"])}(),function(){"use strict";angular.module("ng-sal").constant("ngsalConfig",{applicationName:"ngsalConfig.applicationName"})}(),function(){"use strict";function a(a,b,c,d){var e=a("/"+d.applicationName+"/api/authentication",{username:"@username",password:"@password"},{login:{method:"POST",isArray:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreAuthModule:"ignoreAuthModule"},logoutApi:{method:"GET",url:"/"+d.applicationName+"/api/logout",isArray:!0,ignoreAuthModule:"ignoreAuthModule"},authenticate:{method:"GET",url:"/"+d.applicationName+"/api/authenticate",isArray:!1,ignoreAuthModule:"ignoreAuthModule"},user:{method:"GET",url:"/"+d.applicationName+"/api/user",isArray:!1},goToPerfil:{method:"GET",url:"/"+d.applicationName+"/api/goToPerfil/:codigo",params:{codigo:"@codigo"},isArray:!1}}),f=null;return e.getCurrentUser=function(){return f},e.activateLogin=function(a){f={username:a.username,permissions:{},userDetails:{}},e.authenticate({},function(c){e.setUserDetails(c),b.loginConfirmed(a)})},e.logout=function(a){b.loginCancelled(a),f=null,e.logoutApi(function(a){c.$broadcast("event:userLogout")})},e.setUserDetails=function(a){f||(f={username:a.username,permissions:{},userDetails:{}}),f.userDetails=a.userDetails,f.permissions=a.permissions,c.$broadcast("event:userDetailsPrepared")},e}angular.module("ng-sal").factory("loginService",a),a.$inject=["$resource","authService","$rootScope","ngsalConfig"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){return{username:e(a.username),password:f.encode(e(a.password)),ignoreAuthModule:"ignoreAuthModule"}}function h(){a.username=null,a.password=null}a.authenticationError=!1,a.submit=function(){a.authenticationError=!1,b.login(g(),function(a){b.activateLogin(a),h()},function(c){b.logout(c),h(),a.authenticationError=!0})}}angular.module("ng-sal").controller("loginController",a),a.$inject=["$scope","loginService","authService","$document","$sanitize","$base64"]}(),function(){"use strict";function a(a,b){a.logout=function(){b.logout()},a.changePerfil=function(a){},a.$on("event:userDetailsPrepared",function(){a.user=b.getCurrentUser().userDetails}),a.$on("event:userLogout",function(){a.user={}})}angular.module("ng-sal").controller("userController",a),a.$inject=["$scope","loginService","$document"]}(),function(){"use strict";function a(){return{restrict:"A",template:'<div block-ui block-ui-pattern="/.*/api/authentication/"><div class="form-box" id="login-box" ng-controller="loginController" ng-hide="isAuthenticated"><div class="header"><i class="fa fa-lock"></i> Área Restrita</div><form name="loginForm" autocomplete="off"><div class="body bg-gray"><div class="form-group" show-errors><input auto-focus type="text" name="username" ng-model="username" class="form-control" placeholder="Login"/><span class="help-block" ng-show="loginForm.username.$error.required">Obrigatório</span></div><div class="form-group" show-errors><input type="password" name="password" ng-model="password" class="form-control" placeholder="Senha"/><span class="help-block" ng-show="loginForm.password.$error.required">Obrigatório</span></div></div><div class="footer bg-gray"><button type="submit" ng-click="submit()" class="btn btn-primary btn-block">Autenticar</button><div class="alert alert-danger alert-dismissable" ng-show="authenticationError"><b>Usuário ou senha inválida!</b></div></div></form></div></div>'}}angular.module("ng-sal").directive("loginPanel",a)}(),function(){"use strict";function a(a,b,c){return{restrict:"A",link:function(b,c,d){b.isAuthenticated=!1,(null===a.getCurrentUser()||null===a.getCurrentUser().username||""===a.getCurrentUser().username)&&a.authenticate({},function(c){b.isAuthenticated=!0,a.setUserDetails(c)},function(a){b.isAuthenticated=!1}),c.removeClass("waiting-for-angular"),b.$on("event:auth-loginRequired",function(){b.isAuthenticated=!1}),b.$on("event:auth-loginConfirmed",function(){b.isAuthenticated=!0}),b.$on("event:userLogout",function(){b.isAuthenticated=!1})}}}angular.module("ng-sal").directive("authenticatedApplication",a)}(),function(){"use strict";function a(){return{restrict:"A",template:'<div class="navbar-right" ng-controller="userController" ng-show="isAuthenticated"><ul class="nav navbar-nav"><li class="dropdown user user-menu"><a href="" class="dropdown-toggle" data-toggle="dropdown"> <i class="glyphicon glyphicon-user"></i></a><ul class="dropdown-menu"><li class="user-header bg-light-blue"  style="height: auto;"><p><small>{{user.login}}</small></p><p>{{user.nome}}<small>Perfil: {{user.perfil}}</small></p></li><li class="user-footer"><div class="pull-right"><a href="" ng-click="logout()" class="btn btn-danger" style="color:white;"> Sair</a></div></li></ul></li></ul></div>'}}angular.module("ng-sal").directive("userPanel",a)}();