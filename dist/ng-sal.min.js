!function(){"use strict";angular.module("ng-sal",["http-auth-interceptor","ui.router"])}(),function(){"use strict";function e(e,n,i,t){return{restrict:"A",link:function(n,i,o){n.isAuthenticated=!1,null!==e.getCurrentUser()&&null!==e.getCurrentUser().username&&""!==e.getCurrentUser().username||e.authenticate({},function(i){n.isAuthenticated=!0,e.setUserDetails(i)},function(e){n.isAuthenticated=!1}),i.removeClass("waiting-for-angular"),n.$on("event:auth-loginRequired",function(){n.isAuthenticated=!1}),n.$on("event:auth-loginConfirmed",function(){n.isAuthenticated=!0}),n.$on("event:userLogout",function(){n.isAuthenticated=!1}),n.hasPermission=function(e){return t.hasPermission(e)}}}}angular.module("ng-sal").directive("authenticatedApplication",e),e.$inject=["loginService","$document","$location","permissionService"]}(),function(){"use strict";angular.module("ng-sal").constant("ngsalConfig",{applicationName:"ngsalConfig.applicationName",applicationHomePath:"ngsalConfig.homePath",applicationApiVersion:"ngsalConfig.apiVersion"}).constant("secureResource",{name:function(e){return"ROLE_"+e}})}(),function(){"use strict";function e(e){return{restrict:"A",template:'<div block-ui block-ui-pattern="/.*/api/'+e.apiVersion+'/authentication/"><div class="form-box" id="login-box" ng-controller="loginController" ng-hide="isAuthenticated"><div class="header"><i class="fa fa-lock"></i> Área Restrita</div><form name="loginForm" autocomplete="off"><div class="body bg-gray"><div class="form-group" show-errors><input auto-focus type="text" name="username" ng-model="username" class="form-control" placeholder="Login"/><span class="help-block" ng-show="loginForm.username.$error.required">Obrigatório</span></div><div class="form-group" show-errors><input type="password" name="password" ng-model="password" class="form-control" placeholder="Senha"/><span class="help-block" ng-show="loginForm.password.$error.required">Obrigatório</span></div></div><div class="footer bg-gray"><button type="submit" ng-click="submit()" class="btn btn-primary btn-block">Autenticar</button><div class="alert alert-danger alert-dismissable" ng-show="authenticationError"><b>Usuário ou senha inválida!</b></div></div></form></div></div>'}}angular.module("ng-sal").directive("loginPanel",e),e.$inject=["ngsalConfig"]}(),function(){"use strict";function e(e,n,i,t,o){function r(){return{username:o(e.username),password:btoa(unescape(encodeURIComponent(e.password))),ignoreAuthModule:"ignoreAuthModule"}}function a(){e.username=null,e.password=null}e.authenticationError=!1,e.submit=function(){e.authenticationError=!1,n.login(r(),function(e){n.activateLogin(e),a()},function(i){n.logout(i),a(),e.authenticationError=!0})}}angular.module("ng-sal").controller("loginController",e),e.$inject=["$scope","loginService","authService","$document","$sanitize"]}(),function(){"use strict";function e(e,n,i,t){var o=e("/"+t.applicationName+"/api/"+t.apiVersion+"/authentication",{username:"@username",password:"@password"},{login:{method:"POST",isArray:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreAuthModule:"ignoreAuthModule"},logoutApi:{method:"GET",url:"/"+t.applicationName+"/api/"+t.apiVersion+"/logout",isArray:!0,ignoreAuthModule:"ignoreAuthModule"},authenticate:{method:"GET",url:"/"+t.applicationName+"/api/"+t.apiVersion+"/authenticate",isArray:!1,ignoreAuthModule:"ignoreAuthModule"},user:{method:"GET",url:"/"+t.applicationName+"/api/"+t.apiVersion+"/user",isArray:!1},goToPerfil:{method:"GET",url:"/"+t.applicationName+"/api/"+t.apiVersion+"/goToPerfil/:codigo",params:{codigo:"@codigo"},isArray:!1}}),r=null;return o.getCurrentUser=function(){return r},o.activateLogin=function(e){r={username:e.username,permissions:{},userDetails:{}},o.authenticate({},function(i){o.setUserDetails(i),n.loginConfirmed(e)})},o.logout=function(e){n.loginCancelled(e),r=null,o.logoutApi(function(e){i.$broadcast("event:userLogout")})},o.setUserDetails=function(e){r||(r={username:e.username,permissions:{},userDetails:{}}),r.userDetails=e.userDetails,r.permissions=e.permissions,i.currentUser=r,i.$broadcast("event:userDetailsPrepared")},o}angular.module("ng-sal").factory("loginService",e),e.$inject=["$resource","authService","$rootScope","ngsalConfig"]}(),function(){"use strict";function e(e,n){function i(i){return!!e.getCurrentUser()&&e.getCurrentUser().permissions[n.name(i)]}var t={hasPermission:i};return t}angular.module("ng-sal").factory("permissionService",e),e.$inject=["loginService","secureResource"]}(),function(){"use strict";function e(){return{restrict:"A",template:'<div class="navbar-right" ng-controller="userController" ng-show="isAuthenticated"><ul class="nav navbar-nav"><li class="dropdown user user-menu"><a href="" class="dropdown-toggle" data-toggle="dropdown"> <i class="glyphicon glyphicon-user"></i></a><ul class="dropdown-menu"><li class="user-header bg-light-blue"  style="height: auto;"><p><small>{{user.login}}</small></p><p>{{user.nome}}<small>Perfil: {{user.perfil}}</small></p></li><li class="user-footer"><div class="pull-right"><a href="" ng-click="logout()" class="btn btn-danger" style="color:white;"> Sair</a></div></li></ul></li></ul></div>'}}angular.module("ng-sal").directive("userPanel",e)}(),function(){"use strict";function e(e,n,i,t){e.logout=function(){n.logout()},e.changePerfil=function(e){},e.$on("event:userDetailsPrepared",function(){e.user=n.getCurrentUser().userDetails,t.go(i.homePath)}),e.$on("event:userLogout",function(){e.user={}})}angular.module("ng-sal").controller("userController",e),e.$inject=["$scope","loginService","ngsalConfig","$state"]}();
//# sourceMappingURL=ng-sal.min.js.map
